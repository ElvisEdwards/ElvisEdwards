<!DOCTYPE html>
<html lang="en">
<head>
    <title>three.js webgl - OBJLoader + MTLLoader</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

</head>

<body>
		<div id="container"></div>
		<div id="result" style="border:2px solid red; color:red;">003未触发事件！</div>
 <button type="submit" value="Submit" onclick="change();">Submit</button>
 <input type="button" id="signin_button" onclick="change();"/>

<script src='vendor/three.js/build/three.js'></script>
<script src="js/Detector.js"></script>
<script src="js/controls/OrbitControls.js"></script>
<script src="js/libs/jszip.min.js"></script>
<script src="js/loaders/DDSLoader.js"></script>
<script src="js/loaders/MTLLoader.js"></script>
<script src="js/loaders/OBJLoader.js"></script>
<script src="js/libs/inflate.min.js"></script>
<script src="js/loaders/FBXLoader.js"></script>
<script>

    var container, stats;

    var camera, scene, renderer;

    var mouseX = 0, mouseY = 0;


    init();
    animate();
		var mesh = new THREE.Mesh();


    function init() {
		container = document.getElementById( 'container' );
        //container = document.createElement('div');
        //document.body.appendChild(container);

		renderer = new THREE.WebGLRenderer( { antialias: true } );
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(window.innerWidth/2, window.innerHeight/2);
        container.appendChild(renderer.domElement);
		renderer.setClearColor(0x888888);

		// scene
		scene = new THREE.Scene();
				var ambientLight = new THREE.AmbientLight( 0xcccccc, 0.4 );
				scene.add( ambientLight );

				var pointLight = new THREE.PointLight( 0xffffff, 0.8 );
				scene.add( camera );

				var ambientLight = new THREE.AmbientLight( 0xcccccc, 0.4 );
				scene.add( ambientLight );

        camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 1, 2000);
        camera.position.z = 500;


        //<script src="js/controls/OrbitControls.js">
		var controls = new THREE.OrbitControls( camera, renderer.domElement );
				controls.addEventListener( 'change', render );
				controls.minDistance = 50;
				controls.maxDistance = 300;
				controls.enablePan = false;
				controls.target.set( 0, 0, 0 );
				controls.update();

/*	// model
	var onProgress = function ( xhr ) {
		if ( xhr.lengthComputable ) {
			var percentComplete = xhr.loaded / xhr.total * 100;
			console.log( Math.round(percentComplete, 2) + '% downloaded' );
		}
	};
	var onError = function ( xhr ) { };
	THREE.Loader.Handlers.add( /\.dds$/i, new THREE.DDSLoader() );
	var mtlLoader = new THREE.MTLLoader();
	mtlLoader.setPath( 'models/1/' );
	mtlLoader.load( 'huayinA.mtl', function( materials ) {
		materials.preload();
		var objLoader = new THREE.OBJLoader();
		objLoader.setMaterials( materials );
		objLoader.setPath( 'models/1/' );
		objLoader.load( 'huayinA.obj', function ( object ) {
			//object.position.y = 0.2;
  			// 缩放
			object.scale.x =  object.scale.y =  object.scale.z = 0.25;
			// 旋转
			object.rotation.set(Math.PI/2,Math.PI/2,Math.PI/2) ;
			scene.add( object );
		}, onProgress, onError );
	});

	// model
	var loader = new THREE.FBXLoader();
	loader.load( 'models/1/huayin.fbx', function ( object ) {				

		object.scale.x =  object.scale.y =  object.scale.z = 0.06;

		scene.add( object );
	} );
*/

	// model
	var loader = new THREE.FBXLoader();
	loader.load( 'models/ARproject/fbx/1.FBX', function ( object ) {				
		mesh = object;
		mesh.position.y=-0.15;
		mesh.scale.x =  mesh.scale.y =  mesh.scale.z = 1.66;
		mesh.rotation.x = Math.PI*1.5;
		mesh.rotation.y = Math.PI/2;
		mesh.rotation.z = (Math.PI/9)*7.32;	
		scene.add( mesh );
	} );

		// Grid,网格四个参数分别表示网格宽度、等分数、中心线颜色，网格线颜色。默认分别是10,10,0x444444,0x888888
		var grid = new THREE.GridHelper( 1000, 50,0x000000,0xffffff );
		grid.position.y = -10;
		scene.add( grid );

        window.addEventListener('resize', onWindowResize, false);

    }
    function onWindowResize() {


        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize(window.innerWidth, window.innerHeight);


    }


			function animate() {

				requestAnimationFrame( animate );
				var axis = new THREE.Vector3(0,1,0);
		mesh.rotateOnAxis(axis,Math.PI * (-0.002));
				render();

			}

			function render() {

				camera.lookAt( scene.position );

				renderer.render( scene, camera );

			}

</script>

</body>
</html>
